"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FileTransport = void 0;
const fsExtra = require("fs-extra");
const QueuedTransport_1 = require("./QueuedTransport");
const path = require("path");
class FileTransport extends QueuedTransport_1.QueuedTransport {
    constructor(logFilePath) {
        super();
        this.setLogFilePath(logFilePath);
    }
    setLogFilePath(logfilePath) {
        //if we have a logfile path, set the writer function which will flush the logs and enable future logging
        if (typeof logfilePath === 'string') {
            this.setWriter((message) => {
                //make sure the parent directory exists
                fsExtra.ensureDirSync(path.dirname(logfilePath));
                //append the log entry to the file
                fsExtra.appendFileSync(logfilePath, message.logger.formatMessage(message) + '\n');
            });
        }
        else {
            this.setWriter(undefined);
        }
    }
}
exports.FileTransport = FileTransport;
//# sourceMappingURL=FileTransport.js.map